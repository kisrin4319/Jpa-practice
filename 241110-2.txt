즉시 로딩과 지연 로딩

1. member1 로딩 -> 프록시 team1 엔티티 지연 로딩 (LAZY)

실제 team을 사용하는 시점에 초기화 (DB 조회)

프록시와 즉시로딩 주의

가급적 지연 로딩만 사용(특히 실무에서)

즉시 로딩을 적용하면 예상하지 못한 SQL이 발생

즉시 로딩은 JPQL에서 N+1 문제를 일으킨다.

@ManyToOne , @OneToOne은 기본이 즉시 로딩 -> LAZY로 설정

@OneToMany , @ManyToMany는 기본이 지연 로딩

지연 로딩 활용

Member와 Team은 자주 함께 사용 -> 즉시 로딩

Member와 Order는 가끔 사용 -> 지연 로딩
Order와 Product는 자주 함께 사용 -> 즉시 로딩

하지만 이론적인 부분이라 실무에서는 다 지연로딩으로 세팅하는게 맞다.

모든 연관관계에 지연 로딩을 사용해라!

실무에서 즉시 로딩을 사용하지 마라!

JPQL Fetch 조인이나, 엔티티 그래프 기능을 사용해라!

즉시 로딩은 상상하지 못한 쿼리가 나간다.